import firebase from 'firebase'

const pad_with_zeroes = (number, length) =>{

    var my_string = '' + number;
    while (my_string.length < length) {
        my_string = '0' + my_string;
    }

    return my_string;

}


// const detailedAttendees = useMemo(
//    () => ({
//      collection: "events",
//      doc: params.id,
//      subcollections: [{ collection: "attendees" }],
//      storeAs: "attendees"
//    }),
//    [params.id]
//  );

//  useFirestoreConnect(detailedAttendees);

//  const attendees = useSelector(
//    state => state.firestore.ordered.attendees || []
//  );

export default function addCompanies(db) {


    // Object.keys(data).forEach((company, key) => { //company is the id for db
    //     let docRef = db.collection("companies").doc(company);
    //     let message = docRef.get().then(function(doc) {
    //     if (doc.exists) {
    //         throw new Error("Фирма со тој ИД веќе постои во системот")
    //     } else {
    //         db.collection('companies').doc(company).set(data[company]);
    //         throw "good job" 
    //     }
    // })
    // .catch(function(error) {
    //   console.log(error);
    // });
    // })

    //THIS
    let data = {"21000": 
    {
       "B": "0363"
    },
 "21001": 
    {
       "B": "0363"
    },
 "21002": 
    {
       "B": "0363"
    },
 "21003": 
    {
       "B": "0363"
    },
 "21004": 
    {
       "B": "0363"
    },
 "21005": 
    {
       "B": "0363"
    },
 "21006": 
    {
       "B": "0363"
    },
 "21007": 
    {
       "B": "0363"
    },
 "21008": 
    {
       "B": "0707"
    },
 "21009": 
    {
       "B": "0707"
    },
 "21010": 
    {
       "B": "0185"
    },
 "21011": 
    {
       "B": "1116"
    },
 "21012": 
    {
       "B": "1116"
    },
 "21013": 
    {
       "B": "1116"
    },
 "21014": 
    {
       "B": "1116"
    },
 "21015": 
    {
       "B": "1116"
    },
 "21016": 
    {
       "B": "1116"
    },
 "21017": 
    {
       "B": "1116"
    },
 "21018": 
    {
       "B": "1116"
    },
 "21019": 
    {
       "B": "1116"
    },
 "21020": 
    {
       "B": "1116"
    },
 "21021": 
    {
       "B": "1116"
    },
 "21022": 
    {
       "B": "1116"
    },
 "21023": 
    {
       "B": "1116"
    },
 "21024": 
    {
       "B": "1116"
    },
 "21025": 
    {
       "B": "1116"
    },
 "21026": 
    {
       "B": "0405"
    },
 "21027": 
    {
       "B": "0405"
    },
 "21028": 
    {
       "B": "0363"
    },
 "21029": 
    {
       "B": "1443"
    },
 "21030": 
    {
       "B": "1443"
    },
 "21031": 
    {
       "B": "1443"
    },
 "21032": 
    {
       "B": "1443"
    },
 "21033": 
    {
       "B": "1443"
    },
 "21034": 
    {
       "B": "1443"
    },
 "21035": 
    {
       "B": "1443"
    },
 "21036": 
    {
       "B": "0845"
    },
 "21037": 
    {
       "B": "1486"
    },
 "21038": 
    {
       "B": "1443"
    },
 "21039": 
    {
       "B": "1523"
    },
 "21040": 
    {
       "B": "1523"
    },
 "21041": 
    {
       "B": "1523"
    },
 "21042": 
    {
       "B": "1523"
    },
 "21043": 
    {
       "B": "0707"
    },
 "21044": 
    {
       "B": "1003"
    },
 "21045": 
    {
       "B": "0638"
    },
 "21046": 
    {
       "B": "0638"
    },
 "21047": 
    {
       "B": "1003"
    },
 "21048": 
    {
       "B": "1321"
    },
 "21049": 
    {
       "B": "1347"
    },
 "21050": 
    {
       "B": "1404"
    },
 "21051": 
    {
       "B": "0879"
    },
 "21052": 
    {
       "B": "0879"
    },
 "21053": 
    {
       "B": "0979"
    },
 "21054": 
    {
       "B": "0979"
    },
 "21055": 
    {
       "B": "1487"
    },
 "21056": 
    {
       "B": "1443"
    },
 "21057": 
    {
       "B": "1536"
    },
 "21058": 
    {
       "B": "1536"
    },
 "21059": 
    {
       "B": "1536"
    },
 "21060": 
    {
       "B": "1536"
    },
 "21061": 
    {
       "B": "1536"
    },
 "21062": 
    {
       "B": "1536"
    },
 "21063": 
    {
       "B": "1536"
    },
 "21064": 
    {
       "B": "1536"
    },
 "21065": 
    {
       "B": "0437"
    },
 "21066": 
    {
       "B": "1536"
    },
 "21067": 
    {
       "B": "1536"
    },
 "21068": 
    {
       "B": "1536"
    },
 "21069": 
    {
       "B": "1536"
    },
 "21070": 
    {
       "B": "1536"
    },
 "21071": 
    {
       "B": "1536"
    },
 "21072": 
    {
       "B": "1443"
    },
 "21073": 
    {
       "B": "1443"
    },
 "21074": 
    {
       "B": "1443"
    },
 "21075": 
    {
       "B": "1537"
    },
 "21076": 
    {
       "B": "1537"
    },
 "21077": 
    {
       "B": "1537"
    },
 "21078": 
    {
       "B": "0879"
    },
 "21079": 
    {
       "B": "1443"
    },
 "21080": 
    {
       "B": "1538"
    },
 "21081": 
    {
       "B": "1538"
    },
 "21082": 
    {
       "B": "1538"
    },
 "21083": 
    {
       "B": "1538"
    },
 "21084": 
    {
       "B": "1538"
    },
 "21085": 
    {
       "B": "1538"
    },
 "21086": 
    {
       "B": "1538"
    },
 "21087": 
    {
       "B": "1538"
    },
 "21088": 
    {
       "B": "1538"
    },
 "21089": 
    {
       "B": "0879"
    },
 "21090": 
    {
       "B": "1347"
    },
 "21091": 
    {
       "B": "1347"
    },
 "21092": 
    {
       "B": "1539"
    },
 "21093": 
    {
       "B": "1539"
    },
 "21094": 
    {
       "B": "1539"
    },
 "21095": 
    {
       "B": "1539"
    },
 "21096": 
    {
       "B": "1540"
    },
 "21097": 
    {
       "B": "1540"
    },
 "21098": 
    {
       "B": "1540"
    },
 "21099": 
    {
       "B": "1540"
    },
 "21100": 
    {
       "B": "1540"
    },
 "21101": 
    {
       "B": "1540"
    },
 "21102": 
    {
       "B": "1540"
    },
 "21103": 
    {
       "B": "1540"
    },
 "21104": 
    {
       "B": "1540"
    },
 "21105": 
    {
       "B": "1540"
    },
 "21106": 
    {
       "B": "1540"
    },
 "21107": 
    {
       "B": "1540"
    },
 "21108": 
    {
       "B": "1540"
    },
 "21109": 
    {
       "B": "1347"
    },
 "21110": 
    {
       "B": "1536"
    },
 "21111": 
    {
       "B": "1536"
    },
 "21112": 
    {
       "B": "1536"
    },
 "21113": 
    {
       "B": "1541"
    },
 "21114": 
    {
       "B": "1311"
    },
 "21115": 
    {
       "B": "1542"
    },
 "21116": 
    {
       "B": "1542"
    },
 "21117": 
    {
       "B": "1542"
    },
 "21118": 
    {
       "B": "1542"
    },
 "21119": 
    {
       "B": "1542"
    },
 "21120": 
    {
       "B": "1542"
    },
 "21121": 
    {
       "B": "1542"
    },
 "21122": 
    {
       "B": "1542"
    },
 "21123": 
    {
       "B": "1542"
    },
 "21124": 
    {
       "B": "1542"
    },
 "21125": 
    {
       "B": "1542"
    },
 "21126": 
    {
       "B": "1542"
    },
 "21127": 
    {
       "B": "1542"
    },
 "21128": 
    {
       "B": "1542"
    },
 "21129": 
    {
       "B": "1542"
    },
 "21130": 
    {
       "B": "1542"
    },
 "21131": 
    {
       "B": "1321"
    },
 "21132": 
    {
       "B": "1003"
    },
 "21133": 
    {
       "B": "1543"
    },
 "21135": 
    {
       "B": "0714"
    },
 "21136": 
    {
       "B": "0714"
    },
 "21137": 
    {
       "B": "0714"
    },
 "21138": 
    {
       "B": "0879"
    },
 "21139": 
    {
       "B": "1543"
    },
 "21140": 
    {
       "B": "1288"
    },
 "21141": 
    {
       "B": "1288"
    },
 "21142": 
    {
       "B": "1443"
    },
 "21143": 
    {
       "B": "0714"
    },
 "21144": 
    {
       "B": "0714"
    },
 "21145": 
    {
       "B": "0714"
    },
 "21146": 
    {
       "B": "0714"
    },
 "21147": 
    {
       "B": "1543"
    },
 "21148": 
    {
       "B": "1341"
    },
 "21149": 
    {
       "B": "0238"
    },
 "21150": 
    {
       "B": "0238"
    },
 "21151": 
    {
       "B": "1540"
    },
 "21152": 
    {
       "B": "1540"
    },
 "21153": 
    {
       "B": "1540"
    },
 "21154": 
    {
       "B": "0029"
    },
 "21155": 
    {
       "B": "0353"
    },
 "21156": 
    {
       "B": "1544"
    },
 "21157": 
    {
       "B": "1544"
    },
 "21158": 
    {
       "B": "1545"
    },
 "21159": 
    {
       "B": "1545"
    },
 "21160": 
    {
       "B": "1545"
    },
 "21161": 
    {
       "B": "1404"
    },
 "21162": 
    {
       "B": "1404"
    },
 "21163": 
    {
       "B": "0979"
    },
 "21164": 
    {
       "B": "0569"
    },
 "21165": 
    {
       "B": "1311"
    },
 "21166": 
    {
       "B": "1311"
    },
 "21167": 
    {
       "B": "0453"
    },
 "21168": 
    {
       "B": "0453"
    },
 "21169": 
    {
       "B": "0453"
    },
 "21170": 
    {
       "B": "0453"
    },
 "21171": 
    {
       "B": "0185"
    },
 "21172": 
    {
       "B": "1199"
    },
 "21173": 
    {
       "B": "1347"
    },
 "21174": 
    {
       "B": "1437"
    },
 "21175": 
    {
       "B": "1437"
    },
 "21176": 
    {
       "B": "1437"
    },
 "21177": 
    {
       "B": "1437"
    },
 "21178": 
    {
       "B": "1437"
    },
 "21179": 
    {
       "B": "1437"
    },
 "21180": 
    {
       "B": "1437"
    },
 "21181": 
    {
       "B": "1437"
    },
 "21182": 
    {
       "B": "1437"
    },
 "21183": 
    {
       "B": "1546"
    },
 "21184": 
    {
       "B": "1546"
    },
 "21185": 
    {
       "B": "1203"
    },
 "21186": 
    {
       "B": "1203"
    },
 "21187": 
    {
       "B": "1203"
    },
 "21188": 
    {
       "B": "1547"
    },
 "21189": 
    {
       "B": "1547"
    },
 "21190": 
    {
       "B": "1547"
    },
 "21191": 
    {
       "B": "1547"
    },
 "21192": 
    {
       "B": "1548"
    },
 "21193": 
    {
       "B": "1549"
    },
 "21194": 
    {
       "B": "1549"
    },
 "21195": 
    {
       "B": "1549"
    },
 "21196": 
    {
       "B": "1549"
    },
 "21197": 
    {
       "B": "1549"
    },
 "21198": 
    {
       "B": "1549"
    },
 "21199": 
    {
       "B": "1549"
    },
 "21200": 
    {
       "B": "1549"
    },
 "21201": 
    {
       "B": "1549"
    },
 "21202": 
    {
       "B": "1549"
    },
 "21203": 
    {
       "B": "1549"
    },
 "21204": 
    {
       "B": "1550"
    },
 "21205": 
    {
       "B": "1550"
    },
 "21206": 
    {
       "B": "1550"
    },
 "21207": 
    {
       "B": "1550"
    },
 "21208": 
    {
       "B": "1550"
    },
 "21209": 
    {
       "B": "1550"
    },
 "21210": 
    {
       "B": "1550"
    },
 "21211": 
    {
       "B": "1550"
    },
 "21212": 
    {
       "B": "1550"
    },
 "21213": 
    {
       "B": "1550"
    },
 "21214": 
    {
       "B": "1550"
    },
 "21215": 
    {
       "B": "1550"
    },
 "21216": 
    {
       "B": "1550"
    },
 "21217": 
    {
       "B": "1550"
    },
 "21218": 
    {
       "B": "1550"
    },
 "21219": 
    {
       "B": "1550"
    },
 "21220": 
    {
       "B": "1550"
    },
 "21221": 
    {
       "B": "1550"
    },
 "21222": 
    {
       "B": "1550"
    },
 "21223": 
    {
       "B": "1550"
    },
 "21224": 
    {
       "B": "1550"
    },
 "21225": 
    {
       "B": "1551"
    },
 "21226": 
    {
       "B": "0281"
    },
 "21227": 
    {
       "B": "1550"
    },
 "21228": 
    {
       "B": "1203"
    },
 "21229": 
    {
       "B": "1550"
    },
 "21230": 
    {
       "B": "0029"
    },
 "21231": 
    {
       "B": "0029"
    },
 "21232": 
    {
       "B": "0029"
    },
 "21233": 
    {
       "B": "0029"
    },
 "21234": 
    {
       "B": "0029"
    },
 "21235": 
    {
       "B": "1438"
    },
 "21236": 
    {
       "B": "1438"
    },
 "21237": 
    {
       "B": "1438"
    },
 "21239": 
    {
       "B": "1438"
    },
 "21240": 
    {
       "B": "1438"
    },
 "21241": 
    {
       "B": "1438"
    },
 "21242": 
    {
       "B": "1438"
    },
 "21243": 
    {
       "B": "1438"
    },
 "21244": 
    {
       "B": "1438"
    },
 "21245": 
    {
       "B": "1438"
    },
 "21246": 
    {
       "B": "0453"
    },
 "21247": 
    {
       "B": "1550"
    },
 "21248": 
    {
       "B": "1550"
    },
 "21249": 
    {
       "B": "1550"
    },
 "21250": 
    {
       "B": "1550"
    },
 "21251": 
    {
       "B": "1550"
    },
 "21252": 
    {
       "B": "1549"
    },
 "21253": 
    {
       "B": "1549"
    },
 "21254": 
    {
       "B": "1549"
    },
 "21255": 
    {
       "B": "1549"
    },
 "21256": 
    {
       "B": "1549"
    },
 "21257": 
    {
       "B": "1424"
    },
 "21258": 
    {
       "B": "1424"
    },
 "21259": 
    {
       "B": "1424"
    },
 "21260": 
    {
       "B": "1424"
    },
 "21261": 
    {
       "B": "1552"
    },
 "21262": 
    {
       "B": "1552"
    },
 "21263": 
    {
       "B": "1552"
    },
 "21264": 
    {
       "B": "1552"
    },
 "21265": 
    {
       "B": "1347"
    },
 "21266": 
    {
       "B": "0029"
    },
 "21267": 
    {
       "B": "1549"
    },
 "21268": 
    {
       "B": "1018"
    },
 "21269": 
    {
       "B": "0029"
    },
 "21270": 
    {
       "B": "0029"
    },
 "21271": 
    {
       "B": "0920"
    },
 "21272": 
    {
       "B": "0029"
    },
 "21273": 
    {
       "B": "0029"
    },
 "21274": 
    {
       "B": "0029"
    },
 "21275": 
    {
       "B": "0029"
    },
 "21276": 
    {
       "B": "1018"
    },
 "21277": 
    {
       "B": "1553"
    },
 "21278": 
    {
       "B": "1503"
    },
 "21279": 
    {
       "B": "1503"
    },
 "21280": 
    {
       "B": "1503"
    },
 "21281": 
    {
       "B": "1503"
    },
 "21282": 
    {
       "B": "1503"
    },
 "21283": 
    {
       "B": "1438"
    },
 "21284": 
    {
       "B": "0029"
    },
 "21285": 
    {
       "B": "1554"
    },
 "21286": 
    {
       "B": "0979"
    },
 "21287": 
    {
       "B": "1548"
    },
 "21288": 
    {
       "B": "1555"
    },
 "21289": 
    {
       "B": "1555"
    },
 "21290": 
    {
       "B": "1555"
    },
 "21291": 
    {
       "B": "1431"
    }}
    
    Object.keys(data).map((emp, key) => { //emp is the id of the employee
        let companyId = pad_with_zeroes(data[emp].B, 4)
        let company = db.collection("companies").doc(companyId);

        // Atomically add a new region to the "regions" array field.
        company.update({
            employees: firebase.firestore.FieldValue.arrayUnion(emp)
        })
        .then((res) => {
           console.log("success")
        })
        .catch((err) => console.log(err))
    })

    // let docRef = db.collection("companies").doc("0001");
    // let message = docRef.get().then(function(doc) {
    //         if (doc.exists) {
    //             console.log(doc.data())
    //         } else {
    //             db.collection('companies').doc("0001").set(data["0001"].employees);
    //             throw "good job" 
    //         }
    //     })
    //     .catch(function(error) {
    //       console.log(error);
    //     });

    // Object.keys(data).map((comp, key) => {
    //     console.log(comp)
    // })


    //do the magic here
}